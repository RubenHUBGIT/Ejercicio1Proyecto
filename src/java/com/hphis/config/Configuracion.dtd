<?xml version="1.0" encoding="UTF-8"?>
<!ELEMENT configuracion (baseDatos, log, token, HCE, dataManager?, servidor, charsetHTML, localeMappings?, genPantallas, genForms?, customHospital?, AcrobatReader, Print?, InformacionUsuario?, J2EE?, searchEngine?, JReport?, listadoHIS1dir?, seguridad?, direccionOmed?, CitaTransfer?, loginCertificado?, configLogs?, Entorno?)>
<!ELEMENT baseDatos (conexionMaestros, configMultiDatasource?,recDatosRestrictions)>
<!-- Path completo y nombre del fichero de log -->
<!ELEMENT log (filtroLogueo)>
<!--Tiempo de validez del token en milisegundos -->
<!ELEMENT token (#PCDATA)>
<!ATTLIST token
	TiempoValidezToken CDATA #REQUIRED
>
<!ELEMENT HCE (informes, transacciones)>
<!ELEMENT informes (edicionLocal, informesCAP)>
<!ATTLIST informes
	motorEncriptacion (JAVA | DLL) #REQUIRED
>
<!--
Proceso de versionado de informes editados localmente

dirImagen: path del WebServer al directorio de imÃ¡genes. Debe contener el '/' final

lanza_XXX: Proceso que lanza programas para edicion local o apertura de programas como MEDLINK editados localmente. Se puede poner WORDPAD, NOTEPAD, WORD,..
-->
<!ELEMENT edicionLocal (#PCDATA)>
<!ATTLIST edicionLocal
	servidorDoc CDATA #REQUIRED
	msgDocHPDoctor CDATA #REQUIRED
	tiempoEliminadoInformesDocHPDoctor CDATA #REQUIRED
	directorioInformesEliminados CDATA #REQUIRED
	dirImagen CDATA #REQUIRED
	lanza_HTML CDATA #REQUIRED
	lanza_DOC CDATA #REQUIRED
	lanza_NOTEPAD CDATA #REQUIRED
>
<!ELEMENT informesCAP (#PCDATA)>
<!-- Motor a utilizar para la encriptaciÃ³n de nuevos informes. Los informes antiguos generados con HP-DOCtor se abrirÃ¡n con la DLL (independientemente de la configuraciÃ³n) -->
<!-- Tiempo mÃ¡ximo de espera de una transacciÃ³n (en segundos) -->
<!ELEMENT transacciones (#PCDATA)>
<!ATTLIST transacciones
	maxEspera CDATA #REQUIRED
>
<!-- Numero maximo de elementos que contendran  las caches de los datamanagers -->
<!ELEMENT dataManager (limiteDM*)>
<!ATTLIST dataManager
	defaultLimit CDATA #REQUIRED
>
<!ELEMENT limiteDM (#PCDATA)>
<!ATTLIST limiteDM
	nombre CDATA #REQUIRED
	limite CDATA #REQUIRED
>
<!-- La ruta del servidor (http y puerto) -->
<!ELEMENT servidor (JMS, clustering?)>
<!ATTLIST servidor
	Servidor CDATA #REQUIRED
>
<!-- ConfiguraciÃ³n JMS -->
<!ELEMENT JMS (#PCDATA)>
<!ATTLIST JMS
	activo (N | S) #REQUIRED
	InitialContextFactory CDATA #REQUIRED
	TopicConnectionFactory CDATA #REQUIRED
>
<!ELEMENT clustering (cluster+)>
<!--Servidor cluster para utilizar en la configuraciÃ³n de clustering-->
<!ELEMENT cluster (#PCDATA)>
<!-- El juego de caracteres a utilizar en las pÃ¡ginas web, el estandar serÃ¡ UTF-8 -->
<!ELEMENT charsetHTML (#PCDATA)>
<!--CONFIGURACION DE LA CONEXION A LA BASE DE DATOS DE MAESTROS DE E-DOCTOR
Tendra las propiedades: identificador de la conexion,
nombre del hospital, datasource (Fuente de base de datos)
y tipo de fuente de datos (HIS1,HIS2...) -->
<!ELEMENT conexionMaestros (#PCDATA)>
<!ATTLIST conexionMaestros
	nombre CDATA #IMPLIED
	datasource CDATA #REQUIRED
	fusion CDATA #IMPLIED
	tipo (HIS2 | HIS1 | HCIS | HCISMH) #REQUIRED
	motor (ORACLE | INFORMIX) #REQUIRED
>
<!-- NÂº mÃ¡ximo de hebras a lanzar en consultas multihospital por cada RecDatos -->
<!ELEMENT configMultiDatasource (#PCDATA)>
<!ATTLIST configMultiDatasource
	NumeroMaxHebrasMultiDS CDATA #REQUIRED
>

<!-- Límite por defecto del tamaño del resultado de una query --> 
<!ELEMENT recDatosRestrictions (#PCDATA)>
<!ATTLIST recDatosRestrictions
    maxRowsDefault CDATA #REQUIRED
>
<!--
ConfiguraciÃ³n del mecanismo de logueo y del visualizador de log
activo: Indica si se realizarÃ¡ o no el logueo (S -> activo, cualquier otro valor -> inactivo)

comprimir: Indica si se comprimirÃ¡ o no la salida (S -> comprimida, N -> normal)  NOTA: SÃ_LO SE COMPRIMIRÃ_ LA SALIDA SI EL NAVEGADOR ACEPTA LA COMPRESION (Acept-Enconding gzip)

mostrarMensajes: Indica si se mostrarÃ¡n mensajes del filtro por consola

dirLog: Ruta donde se grabarÃ¡n los archivos de log (en funcion del sistema de archivos, NO VALE EN FORMA DE URL). NOTA: ES CASE SENSITIVE
ej: c:\hphis\web\log

urlLog: URL mapeada al directorio de log (lo utiliza tambiÃ©n el visualizador de log)

urlVisualizadorLog: URL del visualizador de log, se utiliza para no loguear las pÃ¡ginas mientras se

extensiones: indica los TIPOS DE ARCHIVO PARA LOS QUE SE REALIZARA EL LOGUEO (es una extensiÃ³n de la
propiedad <filter-mapping>), se separarÃ¡n por pipes ( | ) y NO se pondrÃ¡n puntos. Ej: jsp |  htm | html
NOTA: LOS ARCHIVOS SIN EXTENSIÃ_N TAMBIÃ_N SE GRABAN (esto se hace para que se graben los servlets)
Hay que tener en cuenta que si se incluye las extensiÃ³n htm tambiÃ©n se grabarÃ¡n las pÃ¡ginas de ayuda que se consulten

excluir: indica los archivos para los que NO se harÃ¡ logueo (independientemente del valor de las propiedades 'activo' y 'extensiones').
SÃ³lo se pondrÃ¡ el nombre del archivo, sin la ruta del servidor y sin argumentos get (para el caso de JSP)
(por ejemplo: /hphis/edoctor/PanelProblemaDetalles.jsp). CUIDADO: EXCLUIR NO ES CASE SENSITIVE, PERO LOS SERVIDORES DE APLICACIONES SÃ_
Cuando haya mÃ¡s de 1 archivo, se separarÃ¡n por pipes ( | )
-->
<!ELEMENT filtroLogueo (#PCDATA)>
<!ATTLIST filtroLogueo
	activo (S | N) #REQUIRED
	comprimir (S | N) #REQUIRED
	mostrarMensajes (S | N) #REQUIRED
	dirLog CDATA #REQUIRED
	urlLog CDATA #REQUIRED
	urlVisualizadorLog CDATA #REQUIRED
	extensiones CDATA #REQUIRED
	excluir CDATA #REQUIRED
>
<!--
 Configuracion del generador de pantallas
dirTempUpload: Path (relativo a HPHISDIRWEB) para ficheros temporales de la aplicacion. Necesita la barra final.

dirDestJSP: Path DESTINO (relativo a HPHISDIRWEB) para las paginas generadas por el XML (ficheros JSP). Necesita la barra final.

dirDestImagenes: Path DESTINO (relativo a HPHISDIR) para las imagenes usadas por el XML (ficheros GIF y JPG). Necesita la barra final.

dirDestClases: Path DESTINO (relativo a HPHISDIR) para las clases generadas por el XML (ficheros CLASS y JAVA). Necesita la barra final.

dirCustom: path destino donde se guardarÃ¡n los paneles y pantallas customizados. Este path se pondrÃ¡ a continuaciÃ³n de /hphis. Por defecto /custom

aplicDest: Direccion HTTP de la AplicaciÃ³n destino de los JSP. Necesita la barra final.

dirPantallasUsuario: Path DESTINO (relativo a HPHISDIR) para las pantallas generadas por los usuarios a partir de los paneles ya existentes. Necesita la barra final.

ejecutarJava: comando para ejecutar el compilador java
-->
<!ELEMENT genPantallas (#PCDATA)>
<!ATTLIST genPantallas
	dirTempUpload CDATA #REQUIRED
	dirDestJSP CDATA #REQUIRED
	dirDestImagenes CDATA #REQUIRED
	dirDestClases CDATA #REQUIRED
	dirCustom CDATA #IMPLIED
	aplicDest CDATA #REQUIRED
	dirPantallasUsuario CDATA #REQUIRED
	dirWebPantallasUsuario CDATA #REQUIRED
	dirWebXML CDATA #REQUIRED
	ejecutarJAVA CDATA #REQUIRED
>
<!--
Configuraciones para modificar aspectos de la aplicaciÃ³n segun el hospital u organizacion de salud
imagenLogoMenu: especifica la ruta de la imagen a insertar en el menu (ej:/hphis/imagenes/logo.gif)
                NOTA: para url's externas a la aplicaciÃ³n, hay que poner siempre http:// (ej: http://www.google.com)
urlLogoMenu: url a la que se redirigira al pulsar sobre la imagen del menu (ej: www.hp.es). Independientemente de su tamaÃ±o, se visualizarÃ¡
             con un tamaÃ±o de anchoLogoMenu x altoLogoMenu. El tamaÃ±o recomendado es 74x61
tipLogMenu: la ayuda contextual que se mostrara al pasar el raton por encima de la imagen (ej: Visitar la pagina de hp)
anchoLogoMenu: el ancho del logotipo del menu (en pixeles), sÃ³lo para visualizaciÃ³n. Opcional, si no se incluye se fijarÃ¡ a 74 pixeles
altoLogoMenu: el alto del logotipo del menu (en pixeles), sÃ³lo para visualizaciÃ³n. Opcional, si no se incluye se fijarÃ¡ a 61 pixeles
-->
<!ELEMENT customHospital (#PCDATA)>
<!ATTLIST customHospital
	imagenLogoMenu CDATA #REQUIRED
	urlLogoMenu CDATA #REQUIRED
	tipLogoMenu CDATA #REQUIRED
	anchoLogoMenu CDATA #IMPLIED
	altoLogoMenu CDATA #IMPLIED
>
<!ELEMENT AcrobatReader (#PCDATA)>
<!ATTLIST AcrobatReader
	location CDATA #REQUIRED
>
<!--
Printing object ScriptX:
    authorized:      The server is included in the authorized list of server (S) or Not (N).
    licenseRevision: Number of Revision of the license file (".mlf"). Default 0.
    marginUnits:     Millimeters (1) or inches (2). Default 1.
    useServer:       Alternative server to use to download ActiveX control and license file (e.g. "http://hcis:7777").
                     This can resolve some license problems. Default is the actual request server and port.
    cabVersion:      Version del fichero ".cab" del Security Manager. Defecto "6,1,432,1".
    GUID:            Identificador del Security Manager. Defecto "{DB4CF510-2214-4973-AF22-726F0C9226BF}"
-->
<!ELEMENT Print (#PCDATA)>
<!ATTLIST Print
	authorized (S | N) #REQUIRED
	licenseRevision CDATA #IMPLIED
	marginUnits (1 | 2) #IMPLIED
	useServer CDATA #IMPLIED
    cabVersion CDATA #IMPLIED
    GUID CDATA #IMPLIED
>
<!--
This element determines if the application is installed on a Developer's machine or in a client's machine (default CLIENT)
-->
<!ELEMENT InformacionUsuario (#PCDATA)>
<!ATTLIST InformacionUsuario
	tipo (CLIENT | DEVELOPER) #IMPLIED
>
<!ELEMENT searchEngine (#PCDATA)>
<!ATTLIST searchEngine
	indexRoot CDATA #IMPLIED
>
<!ELEMENT JReport (#PCDATA)>
<!ATTLIST JReport
	servidor CDATA #IMPLIED
>
<!ELEMENT CitaTransfer (#PCDATA)>
<!ATTLIST CitaTransfer
	Activo CDATA #IMPLIED
	Hora CDATA #IMPLIED
	CommitLimit CDATA #IMPLIED
>
<!--
Forms generation:
    generate:   If Generator must create JSP files (more powerful) or HTML files (easier to maintain). Default JSP.
    precision:  Grid size to create form table (in PowerBuilder units). The lower the value, the more similar to Form in Editor,
                but the resulting page will increase in complexity in the same manner. Default 64.
-->
<!ELEMENT genForms (#PCDATA)>
<!ATTLIST genForms
	generate (JSP | HTML) #REQUIRED
	precision CDATA #IMPLIED
>
<!--
This element allows J2EE integration and new user creation.
class will be the full name of the external class to ask for new user information (it must implements com.hphis.corp.infraestructura.j2ee.J2EE_NewUser interface)
wsdl is the url of the wsdl of the web-service to ask for the information
-->
<!ATTLIST J2EE
	class CDATA #IMPLIED
	wsdl CDATA #IMPLIED
>
<!ELEMENT J2EE (#PCDATA)>

<!-- Use to customize the configuration of listados -->
<!ELEMENT listadoHIS1dir EMPTY>
<!ATTLIST listadoHIS1dir
	cgihost CDATA #REQUIRED
	ejecutable CDATA #IMPLIED
	variables CDATA #IMPLIED
	ruta CDATA #IMPLIED
>

<!ATTLIST forzarAutentificacionInterna
	usuarios CDATA #IMPLIED
>
<!ELEMENT forzarAutentificacionInterna (#PCDATA)>

<!ATTLIST seguridad
	delegarJAAS CDATA #IMPLIED
	JAASConfig CDATA #IMPLIED
>
<!ATTLIST kerberos
	auth CDATA #IMPLIED
>
<!ELEMENT kerberos (#PCDATA)>

<!ELEMENT seguridad (forzarAutentificacionInterna?, kerberos?)>

<!-- Definicion de tipos de datos para el mapeo de idioma-locale.
     Si se requieren mas mapeos, debe añadirse el correspondiente locale_xxx a localeMappings
     y definir el nuevo elemento locale_xxx
-->
<!ELEMENT localeMappings (locale_esp?, locale_eng? )>
<!ATTLIST localeMappings
	default_lang CDATA #REQUIRED
	default_country CDATA #IMPLIED
>
<!--Entidad que define los atributos de los locale -->
<!ENTITY % locale_attr
    "lang CDATA #REQUIRED
	 country CDATA #IMPLIED"
>
<!ELEMENT locale_esp EMPTY>
<!ATTLIST locale_esp
    %locale_attr;
>
<!ELEMENT locale_eng EMPTY>
<!ATTLIST locale_eng
     %locale_attr;
>
<!ELEMENT direccionOmed (#PCDATA)>
<!ATTLIST direccionOmed
	ruta CDATA #REQUIRED
>


<!ELEMENT loginCertificado (#PCDATA)>
<!ATTLIST loginCertificado
	url CDATA #IMPLIED
	url_WS CDATA #IMPLIED
	app_ID CDATA #IMPLIED
	app_PW CDATA #IMPLIED
	url_HCIS CDATA #IMPLIED
	width CDATA #IMPLIED
	height CDATA #IMPLIED
>


<!ELEMENT configLogs (logFileAcceso?, logFileConsola?, logFileeDoctor?, logFileGc?, logFileRecDatos?, logFileServer?)>
<!ELEMENT logFileAcceso (#PCDATA)>
<!ATTLIST logFileAcceso
	patron CDATA #REQUIRED
	minutos CDATA #REQUIRED
	ruta CDATA #REQUIRED
>

<!ELEMENT logFileConsola (#PCDATA)>
<!ATTLIST logFileConsola
	patron CDATA #REQUIRED
	minutos CDATA #REQUIRED
	ruta CDATA #REQUIRED
>

<!ELEMENT logFileeDoctor (#PCDATA)>
<!ATTLIST logFileeDoctor
	patron CDATA #REQUIRED
	minutos CDATA #REQUIRED
	ruta CDATA #REQUIRED
>

<!ELEMENT logFileGc (#PCDATA)>
<!ATTLIST logFileGc
	patron CDATA #REQUIRED
	minutos CDATA #REQUIRED
	ruta CDATA #REQUIRED
>

<!ELEMENT logFileRecDatos (#PCDATA)>
<!ATTLIST logFileRecDatos
	patron CDATA #REQUIRED
	minutos CDATA #REQUIRED
	ruta CDATA #REQUIRED
>

<!ELEMENT logFileServer (#PCDATA)>
<!ATTLIST logFileServer
	patron CDATA #REQUIRED
	minutos CDATA #REQUIRED
	ruta CDATA #REQUIRED
>

<!ELEMENT Entorno (#PCDATA)>
<!ATTLIST Entorno
	estandar CDATA #IMPLIED
>