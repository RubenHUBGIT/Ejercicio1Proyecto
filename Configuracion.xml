<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE configuracion PUBLIC "-//HP HCIS//DTD Configuracion XML//ES" "Configuracion.dtd">
<configuracion>
	<baseDatos>
		<conexionMaestros nombre="Base de datos de Maestros" datasource="imaestros" tipo="HCISMH" motor="ORACLE"/>
		<!--<conexionMaestros nombre="Base de datos de Maestros" datasource="imaestros" tipo="HCISMH" motor="INFORMIX"/>-->
		<configMultiDatasource NumeroMaxHebrasMultiDS="10"/>
        <recDatosRestrictions fetchSize="10" maxRowsDefault="40000" maxQueryTimeoutDefault="50"/>
    </baseDatos>
	<log>
		<filtroLogueo activo="N" comprimir="N" mostrarMensajes="N" dirLog="log" urlLog="/hphis/log" urlVisualizadorLog="/hphis/visualizadorLog" extensiones="jsp |  doc" excluir="/hphis/ProcesarLogin.jsp |  /hphis/principal.jsp | /hphis/LoginEdoctor.jsp | /hphis/vacia.jsp | /hphis/enProceso.jsp"/>
	</log>

    <!-- HPHCIS-21310
    Sirve para indicar a la aplicación la ruta del fichero omed-servlet.xml. En caso de que la ruta sea incorrecta
    el sistema mostrará el error java.io.FileNotFoundException: class
    path resource [] cannot be opened because it does not exist.-->
    <direccionOmed ruta="com/hphis/omed/omed-servlet.xml"/>


	<!-- JIRA 10283 -> Para evitar errores al buscar elementos de la Historia Clinica del paciente que están indexados
	 <searchEngine indexRoot="<RUTA_FISICA>"/>
	 siendo <RUTA_FISICA> la ruta donde se van a buscar los índices (y a crearlos). Se trata de una ruta relativa a partir del directorio /web. -->
	 <searchEngine indexRoot="edoctor/tmp/indices/"/>

	<token TiempoValidezToken="60000"/>
	<HCE>
		<informes motorEncriptacion="JAVA">
			<edicionLocal servidorDoc="\\\\CARLOS\\DOCS\\" msgDocHPDoctor="1000" tiempoEliminadoInformesDocHPDoctor="600000" directorioInformesEliminados="\\\\CARLOS\\DOCELIM\\" dirImagen="/edoctor/imagenes/" lanza_HTML="WORDPAD" lanza_DOC="WORD" lanza_NOTEPAD="NOTEPAD"/>
			<informesCAP>D201|D202|D203|D204|D205|D206|D207|D208|D209|DE0101|E0102|E0201|F04199|F04431|GO102|H0201|H0202|IS0101|IS0102|IS0103|IS0104|IS0105|IS0106|IS0107|IS0108|IS0109|IS0110|IS0111|IS0112|IS0113|IS0114|IS0115|IS0116|IS0117|IS0118|IS0119|IS0120|IS0121|IS0122|IS0123|IS0124|IS0125|IS0126|IS0127|IS0128|IS0129|IS0130|IS0131|IS0132|O0601|O0602|O0603|O0604|O0605|O0606|O0607|O0608|O0609|O0610|O0611|O0612|O0613|O0614|OF0201|PE103|PE105|PS201|TR0103|UC0102</informesCAP>
		</informes>
		<transacciones maxEspera="25"/>
	</HCE>
	<dataManager defaultLimit="200">
        <limiteDM nombre="ActoDM" limite="0"/>
        <limiteDM nombre="AlertaPrescDM" limite="100"/>
        <limiteDM nombre="ArbolSU" limite="15"/>
        <limiteDM nombre="CodDiccioFrecDM" limite="100"/>
        <limiteDM nombre="CodDiccionarioDM" limite="250"/>
        <limiteDM nombre="ContraindicacionDM" limite="100"/>
        <limiteDM nombre="DesplazamientoDM" limite="0"/>
        <limiteDM nombre="DireccionDM" limite="0"/>
        <limiteDM nombre="DocDietaDM" limite="200"/>
        <limiteDM nombre="DocHistoProbDM" limite="100"/>
        <limiteDM nombre="DocPlantillaDM" limite="100"/>
        <limiteDM nombre="DocProblemasDM" limite="0"/>
        <limiteDM nombre="DocProcAsisDM" limite="100"/>
        <limiteDM nombre="EDocConsultaCriteriosDM" limite="100"/>
        <limiteDM nombre="EDocConsultaDM" limite="30"/>
        <limiteDM nombre="EspecialidadFarDM" limite="40000"/>
        <limiteDM nombre="PAAgrupadorDM" limite="100"/>
        <limiteDM nombre="PALinkHistoDM" limite="0"/>
        <limiteDM nombre="PATipoAgrConfigDM" limite="100"/>
        <limiteDM nombre="PetCitaDM" limite="0"/>
        <limiteDM nombre="PetDisgregaDM" limite="0"/>
        <limiteDM nombre="PetMovimientoDM" limite="0"/>
        <limiteDM nombre="PetMuestraDM" limite="0"/>
		<limiteDM nombre="PetPedidoDM" limite="0"/>
		<limiteDM nombre="PetPeticionDM" limite="0"/>
        <limiteDM nombre="PlantillaAnotacionDM" limite="100"/>
        <limiteDM nombre="ProcesoDM" limite="0"/>
        <limiteDM nombre="TratamientoDM" limite="0"/>
        <limiteDM nombre="TreeRelacionDM" limite="2000"/>
        <limiteDM nombre="TreeTiposNodoRelDM" limite="2000"/>
        <limiteDM nombre="TxDM" limite="200"/>
        <limiteDM nombre="OmEspFavDM" limite="1000"/>
        <limiteDM nombre="LimiteEnfPlanPacienteDM" limite="0"/>
        <limiteDM nombre="PacienteExtranjeroDM" limite="0"/>
        <limiteDM nombre="PacienteGesDM" limite="100"/>
        <limiteDM nombre="TutorDM" limite="100"/>
	</dataManager>
	<servidor Servidor="http://localhost:8080">
		<JMS activo="N" InitialContextFactory="org.exolab.jms.jndi.rmi.RmiJndiInitialContextFactory" TopicConnectionFactory="JmsTopicConnectionFactory"/>
	</servidor>

	<!--Báltico-->
	<!--<charsetHTML>windows-1257</charsetHTML>-->
	<!--Latín-->
	<charsetHTML>UTF-8</charsetHTML>
	<!-- Central Europe -->
	<!--<charsetHTML>windows-1250</charsetHTML>-->
	<!--Cirílico-->
	<!--<charsetHTML>windows-1251</charsetHTML>-->
	<!-- Greek-->
	<!--<charsetHTML>windows-1253</charsetHTML>-->
	<!-- Turco-->
	<!--<charsetHTML>windows-1254</charsetHTML>-->
	<!-- Hebreo -->
	<!--<charsetHTML>windows-1255</charsetHTML>-->
	<!-- Árabe -->
	<!--<charsetHTML>windows-1256</charsetHTML>-->
	<!-- Vietnamita -->
	<!--<charsetHTML>windows-1258</charsetHTML>-->
	<!-- Thai -->
	<!--<charsetHTML>windows-874</charsetHTML>-->
	<!-- Chino simplificado -->
	<!--<charsetHTML>gb2312</charsetHTML>-->
	<!-- Chino tradicional -->
	<!--<charsetHTML>big5</charsetHTML>-->
	<!-- Japonés -->
	<!--<charsetHTML>shift_jis</charsetHTML>-->
	<!-- Coreano -->
	<!--<charsetHTML>euc-kr</charsetHTML>-->

    <localeMappings default_lang="es" default_country="ES">
        <locale_esp lang="es" country="ES"/>
        <locale_eng lang="en" country="US"/>
        <!--locale_xxx lang="yy" country="ZZ" -->
    </localeMappings>

    <genPantallas dirTempUpload="genPantallas/tempUpload/" dirCustom="custom/" dirDestJSP="edoctor/" dirDestImagenes="edoctor/imagenes/" dirDestClases="corp/Paneles/" aplicDest="/hphis/edoctor/" dirPantallasUsuario="edoctor/pantallasusuario/" dirWebPantallasUsuario="/hphis/edoctor/pantallasusuario/" dirWebXML="/hphis/edoctor/" ejecutarJAVA="java -Dos.env.HPHISDIR=$HPHISDIR"/>
	<AcrobatReader location="C:\\Archivos de programa\\Adobe\\Acrobat 6.0\\Reader\\acrord32"/>
    <Print authorized="S" licenseRevision="6" marginUnits="1" guid="{2EA9DB6F-C097-41F7-A4F1-4088EBB64FE3}" cabVersion="7,7,0,20" />
    <!-- 1->millimeters, 2->inches -->
	<InformacionUsuario tipo="DEVELOPER"/>
    <JReport servidor="http://localhost:8888/jrserver/" />
   	<listadoHIS1dir cgihost="/listados/Servlet/SListados" ejecutable="/opt/ctl/bin/ctl" variables="-ef /opt/ias10g/hphis/HIS_variables_tcp_ip.env" ruta="/opt/ias10g/hphis/clinica/listados/obj" />
    <seguridad>
        <kerberos auth="false"/>
    </seguridad>

     <!--Jira HPHCIS-33149 Integración de procesos cron de actualizaciónes HCIS en hilos
         Activo: Indica si está activo el proceso de traspaso de CEX_CITA a CEX_ACTIVIDAD
         Hora: Hora a la que se ejecutará el proceso cada dia.
         CommitLimit: numero de sentencias para realizar el commit.
     -->
    <CitaTransfer Activo='N' Hora='12:00' CommitLimit='100'/>

    <CheckFormato Activo='S' Hora='16:00' CommitLimit='500'/>

    <DrlToDB Activo='S' />

    <CexCierreEpisodiosAmbulatorios Activo='N' Hora='12:00'/>

    <cacheArbolSU  limite='6' />

    <RefrescoEditorFormularios Activo='N' Hora1='07:00' Hora2='15:00' Hora3='22:00' />
    
    <!--Jira HPHCIS-112343 Integración de procesos cron Java para refrecar DM's Automáticamente
    	 Activo: Indica si está activo el proceso
         Hora1: Hora a la que se ejecutará el proceso cada dia.
         Hora2: Hora a la que se ejecutará el proceso cada dia.
         Hora3: Hora a la que se ejecutará el proceso cada dia.
     -->
    <RefrescoDM Activo='N' Hora1='07:00' Hora2='15:00' Hora3='22:00' />

    <!-- <FinalizacionTratamientos Activo='[S|N]' Hora='[HH:mm(hora del día)]' CommitLimit='/^([0-9])*$/(número)'/> -->
    <FinalizacionTratamientos Activo='N' Hora='04:00' CommitLimit='100'/>

    <!--Jira HPHCIS-96111 
         Activo: Indica si está activo el proceso 
         Hora: Hora a la que se ejecutará el proceso cada dia.
     -->
    <CancelarPeticiones Activo='N' Hora='00:00' />

    <BorradoAlertasAutomatico Activo='N' />

    <ResolverAplazamientosCaducados Activo='N' />

    <ActualizarEsperaEstructural  Activo='N' />

    <ManagerLatencias  Activo='N' />

    <InhabilitacionCamas Activo='N' />

    <HabilitacionAutomaticaCamas Activo='N' />

    <!-- Ejecuta cada x minutos comprobando que la diferencia del timestamp no supere el limite de tiempo + 1 -->
    <UnlockFormsContext Activo='S' EjecutarCada='1' tiempoAcualizacionTimestamp="1" />

    <ActualizarEstadoPreopCaducado Activo='N' />

    <AnularPrealtas Activo='N' Hora='00:00' />

    <TareasProgramadasService Activo='N'/>

    <ProgramacionConsultaContextListener Activo='N'/>

    <HiloComprobacionConsistenciaBD Activo='N'/>
    
    <!-- <BorradoAutoguardadosAutomatico Activo='[S|N]' LimiteBorrado='[días]' PrimeraEjecucion='[HH:mm(hora del día)]' EjecutarCada='[horas]'/> -->
    <BorradoAutoguardadosAutomatico Activo='S' LimiteBorrado='30' PrimeraEjecucion='00:00' EjecutarCada='24'/>
    
    <!-- <ActualizacionEstadoIncapacidadesTemporales Activo='[S|N]' LimiteDuracionIT='[días]' PrimeraEjecucion='[HH:mm(hora del día)]' EjecutarCada='[horas]'/> -->
    <ActualizacionEstadoIncapacidadesTemporales Activo='S' LimiteDuracionIT='365' PrimeraEjecucion='00:00' EjecutarCada='24'/>

    <DesencoladoWorkflow Activo='N' Periodo='10' NumMensajes='10'/>

    <InterceptorRestServices Activo='N'/>

    <!-- Descomentar esto en caso de utilizar un servidor LDAP con JBOSS
         hay que modificar la "url" por la del servidor LDAP y el "contexto" por la cadena de conexión con nuestro usuario
     -->
    <!--
    <seguridad delegarJAAS="true" JAASConfig="HCISLDAP" >
            <forzarAutentificacionInterna usuarios="admin|sgomez|mmiranda"/>
            <servidorLDAP url="ldap://172.24.10.108:389" contexto="ou=Usuarios,ou=HPSanidad,dc=SSCC,dc=hphis,dc=com" activedirectory="true">
                <ldapattr name="org.jboss.security.auth.spi.LdapLoginModule" value="required"/>
                <ldapattr name="java.naming.factory.initial" value="com.sun.jndi.ldap.LdapCtxFactory"/>
                <ldapattr name="java.naming.provider.url" value="ldap://172.24.10.108:389/"/>
                <ldapattr name="java.naming.security.authentication" value="simple"/>
                <ldapattr name="principalDNPrefix" value="uid="/>
                <ldapattr name="uidAttributeID" value="sAMAccountName="/>
                <ldapattr name="principalDNSuffix" value=",OU=HPSanidad,DC=sscc,DC=hphis,DC=com"/>
                <ldapattr name="browseUserDN" value="pepe2"/>
                <ldapattr name="browseUserPassword" value="Hphcis7"/>
                <ldapattr name="userSearchBaseDN" value="DC=sscc,DC=hphis,DC=com"/>
            </servidorLDAP>
    </seguridad>
    -->

    <loginCertificado
               url=""
               url_WS=""
               app_ID=""
               app_PW=""
               url_HCIS="http://localhost:8080/hphis/"
               width="600"
               height="500"
               />

     <hcis-commons>hcis-commons.jar</hcis-commons>
     <nodeId id="172.24.15.214" sessionLog="false"/>

     <pdf
     	urlwkhtmltopdf="C:\wkhtmltopdf"
     />

    <!-- cron de carga del catalogo de medicamentos -->
    <cronCargaVademecum activo='N' minutos='60'/>

    <!-- HPHCIS-84991
     Se incorporan los parametros necesarios para la descarga de los archivos de log-->
    <configLogs>
      <logFileAcceso
        patron="(\d{2})/([a-zA-Z]{3})/(\d{4}):(\d{2}):(\d{2}):(\d{2})"
        minutos="10"
        ruta="D:\HCIS-logs\log28052014\localhost_access_log"
          />
      <logFileConsola
        patron="(\d{4})-(\d{2})-(\d{2})[\s](\d{2}):(\d{2}):(\d{2},\d{3})"
        minutos="20"
        ruta="D:\HCIS-logs\log28052014\Consola.log"
          />
      <logFileeDoctor
        patron="(\d{4})-(\d{2})-(\d{2})[\s](\d{2}):(\d{2}):(\d{2},\d{3})"
        minutos="33"
        ruta="D:\HCIS-logs\log28052014\eDoctor.log"
          />
      <logFileGc
        patron="(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}\.\d{3})"
        minutos="10"
        ruta="D:\HCIS-logs\log28052014\Consola.log"
          />
      <logFileRecDatos
        patron="(\d{4})-(\d{2})-(\d{2})[\s](\d{2}):(\d{2}):(\d{2},\d{3})"
        minutos="5"
        ruta="D:\HCIS-logs\log28052014\RecDatos.log"
          />
      <logFileServer
        patron="(\d{4})-(\d{2})-(\d{2})[\s](\d{2}):(\d{2}):(\d{2},\d{3})"
        minutos="15"
        ruta="C:\jboss-eap-6.1\standalone\log\hibernate.log"
          />
    </configLogs>

    <logConn active="false" mins="5"/>

    <!-- HPHCIS-107223 -->
    <HCISMFConnection
            hcisNodeIp="localhost" hcisNodePort="8080"
            mfNodeWSIp="localhost" mfNodeWSPort="9080" mfWSProtocol="http"
            mfNodeHTTPIp="localhost" mfNodeHTTPPort="9080" mfHTTPProtocol="http"
            mfContext="/mfhcis"
            mfWSURL="/services/MFFunctionalService"
            mfAbrirEEDesdeAdmisionURL="/abrirEEDesdeAdmision.dpc"
            mfCheckAvailabilityURL="/common/entrada.jsp"
    />

    <!-- failover:(tcp://205.239.140.201:61616,tcp://16.22.5.50:61616)?initialReconnectDelay=100  -->

	<WorkflowConn
               connection="tcp://localhost:61616"
               user="admin"
               password="admin"
               name="TEST"
               />
    <customHospital altoLogoMenu="75" anchoLogoMenu="75" tipLogoMenu="" urlLogoMenu="http://www.dedalusgs.com" imagenLogoMenu="/hphis/corp/imagenes/dedalus_logo_v.png"/>

    <AppMovilidad Activo='N' />

    <UriCustom
        protocol='hcis'
        executables='exe|jar|bat'
        useWebsockets='N'
    />

    <!--milliseconds-->
    <WebSocketsPrint
            timeout='5000'
            timer='300000'
            cookie='SRVID'
            sizeValue='3'/>


    <HealthInfo
            warnRequests='8'
            errorRequests='12' />

    <HelpOnline
            local='C:/'/>

    <SessionKeeper
            title='HCIS Session Keeper'
            message='&lt;html&gt; Quedan %s minutos para &lt;br&gt; que caduque la sesión de usuario, &lt;br&gt; ¿desea mantenerla activa? &lt;/html&gt;'
            holdMessage='&lt;html&gt; La sesión va a caducar &lt;br&gt; en unos instantes, &lt;br&gt; ¿desea mantenerla activa? &lt;/html&gt;'
            logo='dedalus.png'
            button='Aceptar'
    />
    
     <ping url="/ping.html" />

	<Entorno estandar="false" />


    <ExternalAPConn
        connection="saluda.salud.madrid.org"
        source="intServiceHCISAP"
        uri="/hphis/pa/etc/openExternal.ap"
    />

    <InterceptorRestServicesOutConnectTimeout timeout='15000'/>
    <InterceptorRestServicesOutReadTimeout    timeout='15000'/>
</configuracion>
